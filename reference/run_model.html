<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Run Bayesian model"><title>Run Bayesian model — run_model • bbsBayes</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run Bayesian model — run_model"><meta property="og:description" content="Run Bayesian model"><meta property="og:image" content="http://steffilazerte.ca/bbsBayes/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bbsBayes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/bbsBayes.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/BrandonEdwards/bbsBayes/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run Bayesian model</h1>
      <small class="dont-index">Source: <a href="https://github.com/BrandonEdwards/bbsBayes/blob/HEAD/R/run-model.R" class="external-link"><code>R/run-model.R</code></a></small>
      <div class="d-none name"><code>run_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Run Bayesian model</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_model</span><span class="op">(</span></span>
<span>  <span class="va">prepped_data</span>,</span>
<span>  <span class="va">model</span>,</span>
<span>  model_variant <span class="op">=</span> <span class="st">"hier"</span>,</span>
<span>  model_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spatial_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heavy_tailed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  n_knots <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  basis <span class="op">=</span> <span class="st">"mgcv"</span>,</span>
<span>  use_pois <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  calculate_nu <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  calculate_log_lik <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  calculate_CV <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  refresh <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  chains <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  parallel_chains <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  iter_warmup <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  iter_sampling <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  adapt_delta <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  max_treedepth <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  init <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  init_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_basename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  save_output <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">jags_data</span>,</span>
<span>  <span class="va">inits</span>,</span>
<span>  <span class="va">parameters_to_save</span>,</span>
<span>  <span class="va">track_n</span>,</span>
<span>  <span class="va">n_adapt</span>,</span>
<span>  <span class="va">n_burnin</span>,</span>
<span>  <span class="va">n_thin</span>,</span>
<span>  <span class="va">n_chains</span>,</span>
<span>  <span class="va">n_saved_steps</span>,</span>
<span>  <span class="va">n_iter</span>,</span>
<span>  <span class="va">modules</span>,</span>
<span>  <span class="va">parallel</span>,</span>
<span>  <span class="va">n_cores</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>prepped_data</dt>
<dd><p>List. Output of <code><a href="prepare_data.html">prepare_data()</a></code>.</p></dd>


<dt>model</dt>
<dd><p>Character. Type of model to use, must be one of "first_diff"
(First Differences), "gam" (General Additive Model), "gamye" (General
Additive Model with Year Effect), or "slope" (Slope model).</p></dd>


<dt>model_variant</dt>
<dd><p>Character. Model variant to use, must be one of
"nonhier" (Non-hierarchical), "hier" (Hierarchical), or "spatial"
(Spatially explicit).</p></dd>


<dt>model_file</dt>
<dd><p>Character. Location of a custom Stan model file to use.</p></dd>


<dt>spatial_data</dt>
<dd><p>List. Output of <code><a href="prepare_spatial.html">prepare_spatial()</a></code>.</p></dd>


<dt>heavy_tailed</dt>
<dd><p>Logical. Whether extra-Poisson error distributions should
be modelled as a t-distribution, with heavier tails than the standard
normal distribution. Default is <code>TRUE</code>. Recent results suggest this is best
even though it requires much longer convergence times. Can only be used
with Negative Binomial models (i.e. <code>use_pois = FALSE</code>).</p></dd>


<dt>n_knots</dt>
<dd><p>Numeric. Number of knots for "gam" and "gamye" models</p></dd>


<dt>basis</dt>
<dd><p>Character. Basis function to use for GAM smooth, one of
"original" or "mgcv". Default is "original", the same basis used in Smith
and Edwards 2020. "mgcv" is an alternate that uses the "tp" basis from the
package mgcv (also used in brms, and rstanarm). If using the "mgcv" option,
the user may want to consider adjusting the prior distributions for the
parameters and their precision.</p></dd>


<dt>use_pois</dt>
<dd><p>Logical. Whether to use an Over-Dispersed Poisson model
(<code>TRUE</code>) or an Negative Binomial model (<code>FALSE</code>, default).</p></dd>


<dt>calculate_nu</dt>
<dd><p>Logical. Whether to calculate the <code>nu</code> parameter as
a factor of <code>gamma(2, 0.1)</code>. Default is <code>FALSE</code>.</p></dd>


<dt>calculate_log_lik</dt>
<dd><p>Logical. Whether to calculate point-wise
log-likelihood of the data given the model. Default is <code>FALSE</code>.</p></dd>


<dt>calculate_CV</dt>
<dd><p>Logical. Whether to use cross validation.</p></dd>


<dt>refresh</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. Number of iterations
between screen updates. If 0, only errors are shown.</p></dd>


<dt>chains</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. Number of Markov
chains to run.</p></dd>


<dt>parallel_chains</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. Maximum
number of chains to run in parallel.</p></dd>


<dt>iter_warmup</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. Number of warmup
iterations per chain.</p></dd>


<dt>iter_sampling</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. Number of
sampling (post-warmup) iterations per chain.</p></dd>


<dt>adapt_delta</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. The adaptation
target acceptance statistic.</p></dd>


<dt>max_treedepth</dt>
<dd><p>Numeric. Passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. The maximum
allowed tree depth for the NUTS engine. See <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">?cmdstanr::sample</a></code>.</p></dd>


<dt>init</dt>
<dd><p>(multiple options). An initialization method passed to the <code>init</code>
argument of <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. See ?cmdstanr::sample for more details.
The default (<code>NULL</code>) is for bbsBayes to supply initial parameter values
according to model and model variant selected.</p></dd>


<dt>init_only</dt>
<dd><p>Logical. Whether to return the list of initial parameter
values only (and not run the model). This is useful if you wish to see
which <code>init</code> parameters are being supplied.</p></dd>


<dt>output_basename</dt>
<dd><p>Character. Name of the files created as part of the
Stan model run and the final model output RDS file if <code>save_output = TRUE</code>.</p></dd>


<dt>output_dir</dt>
<dd><p>Character. Directory in which all model files will be
created.</p></dd>


<dt>save_output</dt>
<dd><p>Logical. Whether or not to save the model output to file
as an RDS object with all required data. Defaults to <code>TRUE</code>.</p></dd>


<dt>quiet</dt>
<dd><p>Logical. Suppress progress messages? Default <code>FALSE</code></p></dd>


<dt>jags_data</dt>
<dd><p>Defunct.</p></dd>


<dt>inits</dt>
<dd><p>Defunct.</p></dd>


<dt>parameters_to_save</dt>
<dd><p>Defunct.</p></dd>


<dt>track_n</dt>
<dd><p>Defunct.</p></dd>


<dt>n_adapt</dt>
<dd><p>Defunct.</p></dd>


<dt>n_burnin</dt>
<dd><p>Defunct.</p></dd>


<dt>n_thin</dt>
<dd><p>Defunct.</p></dd>


<dt>n_chains</dt>
<dd><p>Defunct.</p></dd>


<dt>n_saved_steps</dt>
<dd><p>Defunct.</p></dd>


<dt>n_iter</dt>
<dd><p>Defunct.</p></dd>


<dt>modules</dt>
<dd><p>Defunct.</p></dd>


<dt>parallel</dt>
<dd><p>Defunct.</p></dd>


<dt>n_cores</dt>
<dd><p>Defunct.</p></dd>


<dt>...</dt>
<dd><p>Other arguments passed on to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list containing the model output (<code>model_fit</code>), meta data for the
analysis (<code>meta_data</code>), meta data for the strata (<code>meta_strata</code>) and
prepared data counts from <code><a href="prepare_data.html">prepare_data()</a></code> (<code>raw_data</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There are two ways you can customize
the model run. The first is to supply a custom <code>model_file</code> created with the
<code><a href="copy_model_file.html">copy_model_file()</a></code> function and then edited by hand.</p>
<p>Second, you can supply a custom list of initialization parameters. You can
supply these parameters in anyway that <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code> accepts the
<code>init</code> argument. One way is to use the bbsBayes created parameters and modify
them as needed. To do this, setup the <code>run_model()</code> function as you would
normally use it, but add <code>init_only = TRUE</code>. This will return the list of
initial definitions. You can edit this list and then run your model with
<code>run_model(... init = new_inits)</code>.</p>
<p>See the <a href="https://steffilazerte.ca/bbsBayes/articles/models.html" class="external-link">models article</a> for more
advanced examples and explanations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="stratify.html">stratify</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"bbs_cws"</span>, sample_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using 'bbs_cws' (standard) stratification</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using sample BBS data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using species Pacific Wren (sample data)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Stratifying data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   Combining BCR 7 and NS and PEI...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   Renaming routes...</span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare_data.html">prepare_data</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run model (quick and dirty)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">run_model</span><span class="op">(</span><span class="va">p</span>, model <span class="op">=</span> <span class="st">"first_diff"</span>, model_variant <span class="op">=</span> <span class="st">"hier"</span>,</span></span>
<span class="r-in"><span>               iter_warmup <span class="op">=</span> <span class="fl">20</span>, iter_sampling <span class="op">=</span> <span class="fl">20</span>, chains <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running MCMC with 2 chains, at most 4 in parallel...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1 WARNING: There aren't enough warmup iterations to fit the </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1          three stages of adaptation as currently configured. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1          Reducing each adaptation stage to 15%/75%/10% of </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1          the given number of warmup iterations: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1            init_buffer = 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1            adapt_window = 15 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1            term_buffer = 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1 Iteration:  1 / 40 [  2%]  (Warmup) </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Exception: neg_binomial_2_log_lpmf: Precision parameter is 0, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Exception: neg_binomial_2_log_lpmf: Precision parameter is 0, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Exception: neg_binomial_2_log_lpmf: Precision parameter is 0, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 Exception: neg_binomial_2_log_lpmf: Precision parameter is inf, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2 WARNING: There aren't enough warmup iterations to fit the </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2          three stages of adaptation as currently configured. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2          Reducing each adaptation stage to 15%/75%/10% of </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2          the given number of warmup iterations: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2            init_buffer = 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2            adapt_window = 15 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2            term_buffer = 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2 Iteration:  1 / 40 [  2%]  (Warmup) </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Exception: neg_binomial_2_log_lpmf: Precision parameter is 0, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Exception: neg_binomial_2_log_lpmf: Precision parameter is 0, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Exception: neg_binomial_2_log_lpmf: Precision parameter is 0, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 Exception: neg_binomial_2_log_lpmf: Precision parameter is inf, but must be positive finite! (in '/tmp/RtmpWV7JXg/model-252d66cad0ec.stan', line 227, column 3 to column 40)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Chain 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2 Iteration: 21 / 40 [ 52%]  (Sampling) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1 Iteration: 21 / 40 [ 52%]  (Sampling) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2 Iteration: 40 / 40 [100%]  (Sampling) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2 finished in 163.3 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1 Iteration: 40 / 40 [100%]  (Sampling) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1 finished in 189.5 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Both chains finished successfully.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mean chain execution time: 176.4 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total execution time: 189.6 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Saving model output to /home/runner/work/bbsBayes/bbsBayes/docs/reference/BBS_STAN_first_diff_hier_2022-12-16_01.rds</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clean up (remove model files)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"BBS_STAN_first_diff_hier_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Brandon P.M. Edwards, Adam C. Smith, Steffi LaZerte.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

